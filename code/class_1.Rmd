
---
title: "Basic of the R lenguage"
output:
  html_document:
    df_print: paged
  html_notebook: default
  pdf_document: default
  word_document: default
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.width = 12, fig.height = 4)
```



## Main types of objects

Vectors are most common and basic data structure in R and is pretty much the workhorse of R. A vector is a collection of elements that are most commonly of mode `character`, `logical`, `integer` or `numeric`. 

Here are some vectors (length one) of different classes: 

```{r}

# Character
a_caracther <- "Hello"
a_caracther
class(a_caracther)

# Numeric
a_number   <- 3; a_number
4 -> another_number; another_number

# Also numeric but infinite 
neg_inf <- log(0); neg_inf
pos_inf <- 1/0; pos_inf


# Logical vectors

a_truth <- TRUE

```
<br>


### Vectors

Usually vectors (of any type) have a length greater than 1. Importantly, in R the elements of a vectors must be of the same data type. Otherwise all elements will be coerced to `character`.

To input these vectors manually you will need to use the operator `c()`, which stands for "concatenate". For example: 


```{r}

# numeric
u <- c(1,2,3,4,5,6); u
v <- c(7,8,9,10,11); v
uv <- c(u,v); uv

# characters

some_letters  <- c("a","b")
more_letters  <- c("c","d") 
all_letters   <- c(some_letters,more_letters); all_letters

```
<br>

There are many other more convenient ways to create vectors. For example:

```{r}

# Repeat value 1, six times
w <- rep(1,6)

# Sequence starting in 1, ending in 2, spaced by 0.5
x <- seq(from=1,to=3.5,by=0.5)

# Sequence of length 6, starting in 10 and ending in 10, spacing authomatically determined.
y <- seq(length=6, from=10, 100)

# Shortcut for seq(6,1,1)
z <- 6:11

# You can combine these functions at will. Example: create a vector that repeats x twice

xx <- rep(x,2)

```
<br>


### Matrices

In R matrices are an extension of vectors. They are not a separate type of object but vector with dimensions: the number of rows and columns. Again, matrices can be created in many ways.

```{r}

# Input manually 

some_numbers <- seq(1:100)

a_matrix <- matrix(some_numbers,  nrow = 2, ncol = 2)
another_matrix <- matrix(some_numbers,  nrow = 5)

# Binding vectors, eithers by rows or by columns

matrix_1 <- cbind(y,w)
matrix_2 <- rbind(y,w)

# Other special cases: a 10 by 10 identity matrix 

ones <- rep(10); ones 
identity <- diag(ones); identity

```
<br>


### Data Frames

A data frame is a very important data type in R. Itâ€™ the structure for most data we use for statistics and the default object in software such as `Stata`, `SAS`, `SPSS`, etc. Unlike vectors and matrices, the content of a data frame is not restricted to a single type and can encompass any mixture of data types. As in matrices, however, in a data frame every element (or "variable) has to have same length (i.e. same number of "observations").




```{r}

df_1 <- data.frame(var1 = y, var2 = w)

df_1$var1
```
<br>


# Lists

Lists are sometimes called generic vectors, because the elements of a list can by of any type of R object, even lists containing further lists. This property makes them fundamentally different from atomic vectors.


```{r}

my_list <- list(myvector=some_letters, mymatrix=M_2, mydf=df_1)

my_list$mymatrix 
```
<br>


# Converting objects

```{r,error=TRUE}

df_2 <- as.data.frame(M_1)
names(df_2) <- c("var1","var2")

as.numeric("3") + 1

as.character(3)
```
<br>

####################### Operations ####################


# Basic operations with text

```{r}

greetings <- paste("Hello","Word",sep=" ")
```
<br>


# Arithmetic 

```{r}

addition    <- 1 + 2
substaction <- 1 - 2 
product     <- 1*2
ratio       <- 1/2
power       <- 1^3
root        <- 1^(1/3)
natlog      <- log(1)
```
<br>

# Vector operations

```{r}

y <- c(3,1,2,4,6,5)
x <- c(5,2,6,5,7,1)


# quantities 
n <- length(y)

sum_y <- sum(y)

min_y <- min(y)

max_y <- max(y)

range_y <- range(y)

rank_y <- rank(y)

sort_y <- sort(y)

add_vectors  <- y + x

add_vector_const <- y + 1

lincom_vector <- 2*x + y
```
<br>




# all math operations on vectors and matrices are interpreted as "element wise" operations. Example:

```{r}

x/y
(y+x)/n
```
<br>


# %*% is vector/matrix multiplication

```{r}

dot_product <- t(x)%*%y

outer_product <- x%*%t(y)
```
<br>

# Some linear algebra (matrix operations)


```{r}

transpose   <- t(M_2)
elementwise <- M_2*M_2

matrix_mult_1 <- M_2%*%t(M_2)
matrix_mult_2 <- t(M_2)%*%M_2
```
<br>

# Logic operations


# <	less than
# <=	less than or equal to
# >	greater than
# >=	greater than or equal to
# ==	exactly equal to
# !=	not equal to
# !x	Not x
# x | y	x OR y
# x & y	x AND y
# isTRUE(x)	test if X is TRUE


```{r}

y>3

(y>3)*1

u==v

u!=v
```
<br>

# subseting

```{r,error=TRUE}
y[1]
y(1)

y[c(1,3)]

y[-c(1,3)]

y[3:length(y)]

names(y) <- paste("Name", 1:length(y), sep = "")
y
y[c("Name1","Name5")]


M_2[2,5]
M_2[,5]
M_2[1,]



y[which(y<2 | y>=5)]

y[y<2 | y>=5]
```
<br>


# assignment to subset

```{r}

y[y<2 | y>=5] <- 0
```
<br>


# Missing values 

```{r}

y <- c(3,1,NA,4,6,NA)

is.na(y)


y[is.na(y)==TRUE] <- 1

```
<br>

####################### Functions ####################

```{r}

my_function <- function(x) {
		fx <- log(x + (x^2)/2 + (x^3)/3 + (x^4)/4 + (x^5)/5)
		return(fx)
	}


my_function(1)
my_function(2)
```
<br>


####################### Loops  ####################

```{r}

list_words <- c("Welcome", "to", "the", "Introduction","to","R")

for (i in list_words) {
	print(i)
}
```
<br>


```{r}

for (i in 1:50) {
	r <- my_function(i)
	print(r) 
}
```
<br>


```{r}

my_function(1:50)

```
<br>
####################### Plot  ####################

```{r}

x <- 1:50
x <- as.matrix(1:50)
y <- my_function(1:50)


plot(x,y, col="red", ylab="log(x + x^2/2 + ... + x^5/5", main="My first function!")
```
<br>